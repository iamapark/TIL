<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HashMap ì´ˆê¸° ìš©ëŸ‰ê³¼ Rehashing ì‹œê°í™”</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 50px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .section h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .section h3 {
            color: #764ba2;
            font-size: 1.5em;
            margin: 25px 0 15px 0;
        }

        .emoji {
            font-size: 1.2em;
            margin-right: 10px;
        }

        /* Rehashing Visualization */
        .rehash-container {
            display: flex;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .hash-table {
            flex: 1;
            min-width: 300px;
        }

        .table-title {
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 15px;
            padding: 10px;
            background: #667eea;
            color: white;
            border-radius: 8px;
            text-align: center;
        }

        .bucket-container {
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 15px;
        }

        .bucket {
            display: flex;
            align-items: center;
            margin: 8px 0;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 5px;
            border-left: 4px solid #ccc;
            transition: all 0.3s;
        }

        .bucket.has-data {
            background: #e3f2fd;
            border-left-color: #2196F3;
        }

        .bucket.moving {
            animation: moveAnimation 1s ease-in-out;
        }

        @keyframes moveAnimation {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(20px); background: #fff3cd; }
        }

        .bucket-index {
            font-weight: bold;
            color: #666;
            margin-right: 15px;
            min-width: 30px;
        }

        .bucket-data {
            font-family: 'Courier New', monospace;
            color: #2196F3;
            font-weight: bold;
        }

        .arrow {
            text-align: center;
            font-size: 3em;
            color: #667eea;
            margin: 20px 0;
        }

        /* Performance Chart */
        .chart-container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin: 30px 0;
        }

        .bar-chart {
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            height: 350px;
            border-bottom: 3px solid #333;
            border-left: 3px solid #333;
            padding: 20px 10px;
            gap: 10px;
        }

        .bar-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .bar {
            width: 100%;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px 8px 0 0;
            transition: all 0.5s ease;
            position: relative;
            cursor: pointer;
        }

        .bar:hover {
            filter: brightness(1.2);
            transform: scale(1.05);
        }

        .bar-label {
            margin-top: 10px;
            font-weight: bold;
            color: #333;
            text-align: center;
            font-size: 0.9em;
        }

        .bar-value {
            position: absolute;
            top: -30px;
            width: 100%;
            text-align: center;
            font-weight: bold;
            color: #667eea;
            font-size: 1.1em;
        }

        /* Cache Locality Visualization */
        .cache-visual {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin: 30px 0;
        }

        .cache-level {
            padding: 20px;
            border-radius: 10px;
            position: relative;
        }

        .cache-level.l1 {
            background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
            color: white;
        }

        .cache-level.l2 {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
        }

        .cache-level.ram {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }

        .cache-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .cache-name {
            font-weight: bold;
            font-size: 1.3em;
        }

        .cache-speed {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .cache-bar {
            height: 30px;
            background: rgba(255,255,255,0.3);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }

        .cache-fill {
            height: 100%;
            background: rgba(255,255,255,0.6);
            border-radius: 15px;
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* Calculator */
        .calculator {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .input-group {
            margin: 20px 0;
        }

        .input-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
            font-size: 1.1em;
        }

        .input-group input {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #ddd;
            border-radius: 8px;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .result-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .result-box h3 {
            color: white;
            margin-bottom: 15px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.3);
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-label {
            font-weight: 600;
        }

        .result-value {
            font-weight: bold;
            font-size: 1.2em;
        }

        /* Comparison Table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .comparison-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-size: 1.1em;
        }

        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .comparison-table tr:hover {
            background: #f8f9fa;
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        .good {
            color: #22c55e;
            font-weight: bold;
        }

        .bad {
            color: #ef4444;
            font-weight: bold;
        }

        .neutral {
            color: #f59e0b;
            font-weight: bold;
        }

        /* Buttons */
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: bold;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        /* Key Points */
        .key-points {
            background: #fff3cd;
            border-left: 5px solid #fbbf24;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .key-points h4 {
            color: #f59e0b;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .key-points ul {
            list-style: none;
            padding: 0;
        }

        .key-points li {
            padding: 8px 0;
            padding-left: 30px;
            position: relative;
        }

        .key-points li:before {
            content: "â†’";
            position: absolute;
            left: 0;
            color: #f59e0b;
            font-weight: bold;
            font-size: 1.3em;
        }

        /* Interactive Demo Controls */
        .demo-controls {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .demo-controls button {
            flex: 1;
            min-width: 150px;
        }

        /* Code Block */
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 20px 0;
        }

        .code-block .keyword {
            color: #569cd6;
        }

        .code-block .string {
            color: #ce9178;
        }

        .code-block .comment {
            color: #6a9955;
        }

        .code-block .number {
            color: #b5cea8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .rehash-container {
                flex-direction: column;
            }

            .bar-chart {
                height: 250px;
            }

            .demo-controls {
                flex-direction: column;
            }

            .demo-controls button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ HashMap ì´ˆê¸° ìš©ëŸ‰ê³¼ Rehashing</h1>
            <p>Java Collection Framework ì„±ëŠ¥ ìµœì í™” ì™„ë²½ ê°€ì´ë“œ</p>
        </div>

        <div class="content">
            <!-- Section 1: Rehashing ê³¼ì • ì‹œê°í™” -->
            <div class="section">
                <h2><span class="emoji">ğŸ”„</span>ì§ˆë¬¸ 1: Rehashing ê³¼ì • ì‹œê°í™”</h2>
                <p style="font-size: 1.1em; margin-bottom: 20px;">
                    <strong>í•µì‹¬:</strong> HashMapì€ hashCode()ë¥¼ ë‹¤ì‹œ í˜¸ì¶œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. 
                    ë‹¨ì§€ ìºì‹œëœ í•´ì‹œ ê°’ìœ¼ë¡œ ìƒˆë¡œìš´ ì¸ë±ìŠ¤ë¥¼ ê³„ì‚°í•˜ì—¬ ì—”íŠ¸ë¦¬ë¥¼ ì¬ë°°ì¹˜í•©ë‹ˆë‹¤.
                </p>

                <div class="key-points">
                    <h4>ğŸ’¡ í•µì‹¬ í¬ì¸íŠ¸</h4>
                    <ul>
                        <li>í•´ì‹œì½”ë“œëŠ” Entry ê°ì²´ì— <strong>ìºì‹œë¨</strong></li>
                        <li>Capacityê°€ ë³€ê²½ë˜ë©´ <strong>ì¸ë±ìŠ¤ë§Œ ì¬ê³„ì‚°</strong></li>
                        <li>ê³µì‹: <code>index = hash % capacity</code></li>
                        <li>ê°™ì€ hashë¼ë„ capacityê°€ ë‹¤ë¥´ë©´ indexê°€ ë‹¤ë¦„!</li>
                    </ul>
                </div>

                <h3>ì¸í„°ë™í‹°ë¸Œ ë°ëª¨</h3>
                <div class="demo-controls">
                    <button class="btn" onclick="showRehashingDemo(4, 8)">4 â†’ 8 ë¦¬ì‚¬ì´ì§•</button>
                    <button class="btn" onclick="showRehashingDemo(8, 16)">8 â†’ 16 ë¦¬ì‚¬ì´ì§•</button>
                    <button class="btn" onclick="showRehashingDemo(16, 32)">16 â†’ 32 ë¦¬ì‚¬ì´ì§•</button>
                </div>

                <div id="rehashDemo" class="rehash-container">
                    <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                </div>

                <div class="code-block">
<span class="comment">// HashMapì˜ ì‹¤ì œ ë¦¬ì‚¬ì´ì§• ë¡œì§ (ê°œë…)</span>
<span class="keyword">void</span> resize() {
    Entry[] oldTable = table;
    Entry[] newTable = <span class="keyword">new</span> Entry[capacity * <span class="number">2</span>];
    
    <span class="keyword">for</span> (Entry&lt;K,V&gt; entry : oldTable) {
        <span class="keyword">if</span> (entry != <span class="keyword">null</span>) {
            <span class="comment">// âœ… ìºì‹œëœ í•´ì‹œ ì‚¬ìš© (ì¬ê³„ì‚° ì•ˆ í•¨!)</span>
            <span class="keyword">int</span> cachedHash = entry.hash;
            
            <span class="comment">// âœ… ìƒˆ capacityë¡œ ì¸ë±ìŠ¤ë§Œ ì¬ê³„ì‚°</span>
            <span class="keyword">int</span> newIndex = cachedHash & (newTable.length - <span class="number">1</span>);
            
            <span class="comment">// âœ… ìƒˆ ìœ„ì¹˜ë¡œ ì¬ë°°ì¹˜</span>
            newTable[newIndex] = entry;
        }
    }
    table = newTable;
}
                </div>
            </div>

            <!-- Section 2: ì„±ëŠ¥ ë¹„êµ -->
            <div class="section">
                <h2><span class="emoji">âš¡</span>ì§ˆë¬¸ 2: ì´ˆê¸° ìš©ëŸ‰ê³¼ ì„±ëŠ¥</h2>
                <p style="font-size: 1.1em; margin-bottom: 20px;">
                    <strong>í•µì‹¬:</strong> ì´ˆê¸° ìš©ëŸ‰ì„ ë„ˆë¬´ í¬ê²Œ ì„¤ì •í•˜ë©´ CPU ìºì‹œ ë¯¸ìŠ¤, ë©”ëª¨ë¦¬ ë‚­ë¹„ ë“±ìœ¼ë¡œ ì˜¤íˆë ¤ ì„±ëŠ¥ì´ ì €í•˜ë©ë‹ˆë‹¤.
                </p>

                <h3>1,000,000ê°œ ìš”ì†Œ ì¶”ê°€ ì‹œ ì„±ëŠ¥ ë¹„êµ</h3>
                <div class="chart-container">
                    <div class="bar-chart" id="performanceChart">
                        <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                    </div>
                    <p style="text-align: center; margin-top: 20px; color: #666; font-style: italic;">
                        * ë‹¨ìœ„: ë°€ë¦¬ì´ˆ(ms), ê°’ì´ ë‚®ì„ìˆ˜ë¡ ë¹ ë¦„
                    </p>
                </div>

                <div class="key-points">
                    <h4>âš ï¸ í° Capacityì˜ ë¬¸ì œì </h4>
                    <ul>
                        <li><strong>CPU ìºì‹œ ë¯¸ìŠ¤:</strong> í° ë°°ì—´ì€ L1/L2 ìºì‹œì— ë“¤ì–´ê°€ì§€ ì•ŠìŒ</li>
                        <li><strong>ì´ˆê¸° í• ë‹¹ ë¹„ìš©:</strong> ìˆ˜ MB ì—°ì† ë©”ëª¨ë¦¬ í• ë‹¹ì— ì‹œê°„ ì†Œìš”</li>
                        <li><strong>Iteration ëŠë¦¼:</strong> ë¹ˆ ë²„í‚·ê¹Œì§€ ëª¨ë‘ ìˆœíšŒ</li>
                        <li><strong>GC ì••ë ¥:</strong> í° ê°ì²´ëŠ” Old Generationìœ¼ë¡œ ì§í–‰</li>
                        <li><strong>ë©”ëª¨ë¦¬ ë‚­ë¹„:</strong> ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë²„í‚·ë“¤</li>
                    </ul>
                </div>
            </div>

            <!-- Section 3: ìºì‹œ ì§€ì—­ì„± -->
            <div class="section">
                <h2><span class="emoji">ğŸ¯</span>CPU ìºì‹œ ì§€ì—­ì„± ì‹œê°í™”</h2>
                <p style="font-size: 1.1em; margin-bottom: 20px;">
                    í˜„ëŒ€ CPUëŠ” ê³„ì¸µì  ìºì‹œ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. 
                    HashMapì˜ ë‚´ë¶€ ë°°ì—´ì´ ì‘ìœ¼ë©´ ë¹ ë¥¸ ìºì‹œì— ë“¤ì–´ê°€ì§€ë§Œ, í¬ë©´ ëŠë¦° RAM ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤.
                </p>

                <div class="cache-visual">
                    <div class="cache-level l1">
                        <div class="cache-header">
                            <span class="cache-name">L1 Cache (32-64 KB)</span>
                            <span class="cache-speed">1-4 ì‚¬ì´í´ âš¡</span>
                        </div>
                        <div class="cache-bar">
                            <div class="cache-fill" id="l1Fill" style="width: 10%;">
                                capacity â‰¤ 16
                            </div>
                        </div>
                    </div>

                    <div class="cache-level l2">
                        <div class="cache-header">
                            <span class="cache-name">L2 Cache (256 KB - 1 MB)</span>
                            <span class="cache-speed">10-20 ì‚¬ì´í´ ğŸ”¥</span>
                        </div>
                        <div class="cache-bar">
                            <div class="cache-fill" id="l2Fill" style="width: 30%;">
                                capacity â‰¤ 1,000
                            </div>
                        </div>
                    </div>

                    <div class="cache-level ram">
                        <div class="cache-header">
                            <span class="cache-name">RAM (ìˆ˜ì‹­ GB)</span>
                            <span class="cache-speed">200+ ì‚¬ì´í´ ğŸŒ</span>
                        </div>
                        <div class="cache-bar">
                            <div class="cache-fill" id="ramFill" style="width: 80%;">
                                capacity = 1,000,000
                            </div>
                        </div>
                    </div>
                </div>

                <div style="background: white; padding: 20px; border-radius: 10px; margin-top: 30px;">
                    <h4 style="margin-bottom: 15px;">ğŸ’¾ ë©”ëª¨ë¦¬ í¬ê¸° ë¹„êµ</h4>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Capacity</th>
                                <th>ë°°ì—´ í¬ê¸°</th>
                                <th>ìºì‹œ ìœ„ì¹˜</th>
                                <th>ì ‘ê·¼ ì†ë„</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>16</strong></td>
                                <td>128 bytes</td>
                                <td><span class="good">L1 Cache âœ“</span></td>
                                <td><span class="good">ë§¤ìš° ë¹ ë¦„</span></td>
                            </tr>
                            <tr>
                                <td><strong>1,000</strong></td>
                                <td>8 KB</td>
                                <td><span class="good">L1/L2 Cache âœ“</span></td>
                                <td><span class="good">ë¹ ë¦„</span></td>
                            </tr>
                            <tr>
                                <td><strong>10,000</strong></td>
                                <td>80 KB</td>
                                <td><span class="neutral">L2 Cache</span></td>
                                <td><span class="neutral">ë³´í†µ</span></td>
                            </tr>
                            <tr>
                                <td><strong>1,000,000</strong></td>
                                <td>8 MB</td>
                                <td><span class="bad">RAM âœ—</span></td>
                                <td><span class="bad">ëŠë¦¼</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Section 4: ìµœì  ìš©ëŸ‰ ê³„ì‚°ê¸° -->
            <div class="section">
                <h2><span class="emoji">ğŸ§®</span>ìµœì  ì´ˆê¸° ìš©ëŸ‰ ê³„ì‚°ê¸°</h2>
                <p style="font-size: 1.1em; margin-bottom: 20px;">
                    ì˜ˆìƒë˜ëŠ” ìš”ì†Œ ê°œìˆ˜ë¥¼ ì…ë ¥í•˜ë©´ ìµœì ì˜ ì´ˆê¸° ìš©ëŸ‰ì„ ê³„ì‚°í•´ë“œë¦½ë‹ˆë‹¤.
                </p>

                <div class="calculator">
                    <div class="input-group">
                        <label for="expectedSize">ì˜ˆìƒ ìš”ì†Œ ê°œìˆ˜:</label>
                        <input type="number" id="expectedSize" value="10000" min="1" 
                               oninput="calculateOptimalCapacity()">
                    </div>

                    <div class="result-box" id="calculatorResult">
                        <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                    </div>

                    <div style="margin-top: 30px; background: white; padding: 20px; border-radius: 10px;">
                        <h4 style="margin-bottom: 15px;">ğŸ“ ê³„ì‚° ê³µì‹</h4>
                        <div class="code-block">
<span class="comment">// ArrayListì˜ ìµœì  ì´ˆê¸° ìš©ëŸ‰</span>
<span class="keyword">int</span> capacity = expectedSize;
List&lt;T&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;(capacity);

<span class="comment">// HashMapì˜ ìµœì  ì´ˆê¸° ìš©ëŸ‰ (Load Factor 0.75 ê³ ë ¤)</span>
<span class="keyword">int</span> capacity = (<span class="keyword">int</span>) (expectedSize / <span class="number">0.75</span>) + <span class="number">1</span>;
Map&lt;K, V&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;(capacity);

<span class="comment">// ë˜ëŠ” Guava ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©</span>
Map&lt;K, V&gt; map = Maps.newHashMapWithExpectedSize(expectedSize);
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 5: ì‹¤ë¬´ ê°€ì´ë“œë¼ì¸ -->
            <div class="section">
                <h2><span class="emoji">ğŸ“š</span>ì‹¤ë¬´ ê°€ì´ë“œë¼ì¸</h2>
                
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>ì˜ˆìƒ í¬ê¸°</th>
                            <th>ê¶Œì¥ ì‚¬í•­</th>
                            <th>ì´ìœ </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>&lt; 100</strong></td>
                            <td><span class="good">ê¸°ë³¸ê°’ ì‚¬ìš© (16)</span></td>
                            <td>ìµœì í™” íš¨ê³¼ê°€ ë¯¸ë¯¸í•˜ê³  ì½”ë“œë§Œ ë³µì¡í•´ì§</td>
                        </tr>
                        <tr>
                            <td><strong>100 ~ 10,000</strong></td>
                            <td><span class="good">ì´ˆê¸° ìš©ëŸ‰ ì§€ì •</span></td>
                            <td>ë¦¬ì‚¬ì´ì§• ì œê±°ë¡œ ì„±ëŠ¥ í–¥ìƒ (ìµœëŒ€ 4ë°°)</td>
                        </tr>
                        <tr>
                            <td><strong>10,000 ~ 100,000</strong></td>
                            <td><span class="neutral">ì‹ ì¤‘í•œ ìš©ëŸ‰ ê³„ì‚°</span></td>
                            <td>ìºì‹œ ì§€ì—­ì„±ê³¼ ë©”ëª¨ë¦¬ ê· í˜• í•„ìš”</td>
                        </tr>
                        <tr>
                            <td><strong>&gt; 100,000</strong></td>
                            <td><span class="bad">ë¶„í•  ë˜ëŠ” ë‹¤ë¥¸ ìë£Œêµ¬ì¡°</span></td>
                            <td>ë‹¨ì¼ HashMapë³´ë‹¤ ë¶„ì‚° êµ¬ì¡°ê°€ íš¨ìœ¨ì </td>
                        </tr>
                    </tbody>
                </table>

                <h3 style="margin-top: 30px;">âœ… Best Practices</h3>
                <div class="key-points">
                    <ul>
                        <li><strong>ì•Œê³  ìˆëŠ” í¬ê¸°:</strong> í•­ìƒ ì´ˆê¸° ìš©ëŸ‰ ì§€ì •</li>
                        <li><strong>load factor:</strong> íŠ¹ë³„í•œ ì´ìœ  ì—†ìœ¼ë©´ 0.75 ìœ ì§€</li>
                        <li><strong>ë„ˆë¬´ í¬ì§€ ì•Šê²Œ:</strong> ì •í™•í•œ í¬ê¸° + 33% ì •ë„ë©´ ì¶©ë¶„</li>
                        <li><strong>í”„ë¡œíŒŒì¼ë§:</strong> ì‹¤ì œ ì„±ëŠ¥ ì¸¡ì • í›„ ì¡°ì •</li>
                        <li><strong>ë©”ëª¨ë¦¬ ê³ ë ¤:</strong> ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•˜ë©´ ì ì€ ìš©ëŸ‰ ì„ íƒ</li>
                    </ul>
                </div>

                <h3 style="margin-top: 30px;">âŒ í”¼í•´ì•¼ í•  ê²ƒ</h3>
                <div style="background: #fee; border-left: 5px solid #ef4444; padding: 20px; border-radius: 8px;">
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 8px 0;">ğŸš« <strong>load factorë¥¼ 1.0ìœ¼ë¡œ:</strong> ì¶©ëŒ ì¦ê°€ë¡œ ì„±ëŠ¥ ì €í•˜</li>
                        <li style="padding: 8px 0;">ğŸš« <strong>ì˜ˆìƒë³´ë‹¤ í›¨ì”¬ í° ìš©ëŸ‰:</strong> ë©”ëª¨ë¦¬ ë‚­ë¹„, ìºì‹œ ë¯¸ìŠ¤</li>
                        <li style="padding: 8px 0;">ğŸš« <strong>í¬ê¸°ë¥¼ ëª¨ë¥´ëŠ”ë° í° ê°’:</strong> "í˜¹ì‹œ ëª°ë¼ì„œ" í° ê°’ì€ ì—­íš¨ê³¼</li>
                        <li style="padding: 8px 0;">ğŸš« <strong>ì¡°ê¸° ìµœì í™”:</strong> ì¸¡ì • ì—†ì´ ì¶”ì¸¡ìœ¼ë¡œ ìµœì í™”</li>
                    </ul>
                </div>
            </div>

            <!-- Section 6: ìš”ì•½ -->
            <div class="section" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-left: none;">
                <h2 style="color: white;"><span class="emoji">ğŸ¯</span>í•µì‹¬ ìš”ì•½</h2>
                
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <h3 style="color: white; margin-top: 0;">ì§ˆë¬¸ 1: Rehashingì´ í•„ìš”í•œ ì´ìœ </h3>
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 8px 0;">âœ“ hashCode()ëŠ” ì¬ê³„ì‚°í•˜ì§€ ì•ŠìŒ (Entryì— ìºì‹œë¨)</li>
                        <li style="padding: 8px 0;">âœ“ capacity ë³€ê²½ â†’ ì¸ë±ìŠ¤ ì¬ê³„ì‚° í•„ìš”</li>
                        <li style="padding: 8px 0;">âœ“ ê³µì‹: index = hash % capacity</li>
                        <li style="padding: 8px 0;">âœ“ ê°™ì€ hashë¼ë„ ë‹¤ë¥¸ capacityë©´ ë‹¤ë¥¸ index</li>
                    </ul>
                </div>

                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <h3 style="color: white; margin-top: 0;">ì§ˆë¬¸ 2: í° ì´ˆê¸° ìš©ëŸ‰ì´ ëŠë¦° ì´ìœ </h3>
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 8px 0;">1ï¸âƒ£ <strong>CPU ìºì‹œ ë¯¸ìŠ¤</strong> - í° ë°°ì—´ì€ L1/L2ì— ì•ˆ ë“¤ì–´ê°</li>
                        <li style="padding: 8px 0;">2ï¸âƒ£ <strong>ì´ˆê¸° í• ë‹¹ ë¹„ìš©</strong> - ìˆ˜ MB ë©”ëª¨ë¦¬ í• ë‹¹ ì‹œê°„</li>
                        <li style="padding: 8px 0;">3ï¸âƒ£ <strong>Iteration ëŠë¦¼</strong> - ë¹ˆ ë²„í‚·ê¹Œì§€ ìˆœíšŒ</li>
                        <li style="padding: 8px 0;">4ï¸âƒ£ <strong>GC ì••ë ¥ ì¦ê°€</strong> - Old Gen ì§í–‰</li>
                        <li style="padding: 8px 0;">5ï¸âƒ£ <strong>ë©”ëª¨ë¦¬ ë‚­ë¹„</strong> - ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê³µê°„</li>
                    </ul>
                </div>

                <div style="background: rgba(255,255,255,0.2); padding: 25px; border-radius: 10px; text-align: center; margin-top: 30px;">
                    <h3 style="color: white; font-size: 1.5em; margin-bottom: 15px;">â­ í™©ê¸ˆ ê·œì¹™</h3>
                    <p style="font-size: 1.3em; margin: 0; font-weight: bold;">
                        ì •í™•í•œ í¬ê¸° + 33% = ìµœì ì˜ ì„±ëŠ¥
                    </p>
                    <p style="font-size: 1.1em; margin-top: 10px; opacity: 0.9;">
                        (expectedSize / 0.75) + 1
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Rehashing Demo
        function showRehashingDemo(oldCapacity, newCapacity) {
            const demoDiv = document.getElementById('rehashDemo');
            
            // ìƒ˜í”Œ ë°ì´í„° ìƒì„±
            const sampleData = [
                { key: 'apple', hash: 93029210 },
                { key: 'banana', hash: 3029737710 },
                { key: 'cherry', hash: 3052045370 },
                { key: 'date', hash: 3089570 },
                { key: 'elderberry', hash: 3127837009 }
            ];

            // Old table ìƒì„±
            const oldTable = Array(oldCapacity).fill(null);
            sampleData.forEach(item => {
                const index = item.hash % oldCapacity;
                if (!oldTable[index]) oldTable[index] = [];
                oldTable[index].push(item);
            });

            // New table ìƒì„±
            const newTable = Array(newCapacity).fill(null);
            sampleData.forEach(item => {
                const index = item.hash % newCapacity;
                if (!newTable[index]) newTable[index] = [];
                newTable[index].push(item);
            });

            // HTML ìƒì„±
            let html = `
                <div class="hash-table">
                    <div class="table-title">Before: capacity = ${oldCapacity}</div>
                    <div class="bucket-container">
            `;

            for (let i = 0; i < oldCapacity; i++) {
                const hasData = oldTable[i] && oldTable[i].length > 0;
                const dataStr = hasData ? oldTable[i].map(d => `${d.key}(h:${d.hash})`).join(', ') : '';
                html += `
                    <div class="bucket ${hasData ? 'has-data' : ''}">
                        <span class="bucket-index">[${i}]</span>
                        <span class="bucket-data">${dataStr}</span>
                    </div>
                `;
            }

            html += `
                    </div>
                </div>
                <div class="arrow">â†’</div>
                <div class="hash-table">
                    <div class="table-title">After: capacity = ${newCapacity}</div>
                    <div class="bucket-container">
            `;

            for (let i = 0; i < newCapacity; i++) {
                const hasData = newTable[i] && newTable[i].length > 0;
                const dataStr = hasData ? newTable[i].map(d => `${d.key}`).join(', ') : '';
                html += `
                    <div class="bucket ${hasData ? 'has-data moving' : ''}">
                        <span class="bucket-index">[${i}]</span>
                        <span class="bucket-data">${dataStr}</span>
                    </div>
                `;
            }

            html += `
                    </div>
                </div>
            `;

            demoDiv.innerHTML = html;
        }

        // Performance Chart
        function createPerformanceChart() {
            const data = [
                { label: 'ê¸°ë³¸ê°’(16)', value: 850, color: '#ef4444' },
                { label: '1,000', value: 320, color: '#f59e0b' },
                { label: '10,000', value: 180, color: '#22c55e' },
                { label: '100,000', value: 160, color: '#22c55e' },
                { label: '1,000,000', value: 320, color: '#f59e0b' },
                { label: '10,000,000', value: 620, color: '#ef4444' }
            ];

            const maxValue = Math.max(...data.map(d => d.value));
            const chartDiv = document.getElementById('performanceChart');

            let html = '';
            data.forEach(item => {
                const heightPercent = (item.value / maxValue) * 100;
                html += `
                    <div class="bar-wrapper">
                        <div class="bar" style="height: ${heightPercent}%; background: linear-gradient(180deg, ${item.color} 0%, ${item.color}dd 100%);">
                            <div class="bar-value">${item.value}ms</div>
                        </div>
                        <div class="bar-label">${item.label}</div>
                    </div>
                `;
            });

            chartDiv.innerHTML = html;
        }

        // Calculator
        function calculateOptimalCapacity() {
            const expectedSize = parseInt(document.getElementById('expectedSize').value) || 0;
            
            if (expectedSize <= 0) {
                document.getElementById('calculatorResult').innerHTML = '<p>ìœ íš¨í•œ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”.</p>';
                return;
            }

            // ArrayList ê³„ì‚°
            const arrayListCapacity = expectedSize;

            // HashMap ê³„ì‚°
            const hashMapCapacity = Math.floor(expectedSize / 0.75) + 1;
            
            // ì‹¤ì œ capacity (2ì˜ ê±°ë“­ì œê³±)
            let actualCapacity = 1;
            while (actualCapacity < hashMapCapacity) {
                actualCapacity *= 2;
            }

            // Threshold ê³„ì‚°
            const threshold = Math.floor(actualCapacity * 0.75);

            // ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
            const memoryBytes = actualCapacity * 8;
            const memoryKB = (memoryBytes / 1024).toFixed(2);
            const memoryMB = (memoryBytes / 1024 / 1024).toFixed(2);

            // ë¦¬ì‚¬ì´ì§• íšŸìˆ˜ ì˜ˆì¸¡ (ê¸°ë³¸ê°’ ì‚¬ìš© ì‹œ)
            let resizeCount = 0;
            let currentCap = 16;
            while (currentCap * 0.75 < expectedSize) {
                resizeCount++;
                currentCap *= 2;
            }

            let html = `
                <h3>ê³„ì‚° ê²°ê³¼</h3>
                <div class="result-item">
                    <span class="result-label">ì˜ˆìƒ ìš”ì†Œ ê°œìˆ˜:</span>
                    <span class="result-value">${expectedSize.toLocaleString()}ê°œ</span>
                </div>
                <div class="result-item">
                    <span class="result-label">ArrayList ê¶Œì¥ ìš©ëŸ‰:</span>
                    <span class="result-value">${arrayListCapacity.toLocaleString()}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">HashMap ê¶Œì¥ ìš©ëŸ‰:</span>
                    <span class="result-value">${hashMapCapacity.toLocaleString()}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">ì‹¤ì œ í• ë‹¹ ìš©ëŸ‰ (2^n):</span>
                    <span class="result-value">${actualCapacity.toLocaleString()}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Threshold (75%):</span>
                    <span class="result-value">${threshold.toLocaleString()}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰:</span>
                    <span class="result-value">${memoryBytes > 1024*1024 ? memoryMB + ' MB' : memoryKB + ' KB'}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">ê¸°ë³¸ê°’ ì‚¬ìš© ì‹œ ë¦¬ì‚¬ì´ì§•:</span>
                    <span class="result-value">${resizeCount}íšŒ</span>
                </div>
            `;

            document.getElementById('calculatorResult').innerHTML = html;
        }

        // Initialize
        window.onload = function() {
            showRehashingDemo(16, 32);
            createPerformanceChart();
            calculateOptimalCapacity();
        };
    </script>
</body>
</html>