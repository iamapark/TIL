<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤í”„ë§ íŠ¸ëœì­ì…˜ AOP ë™ì‘ íë¦„ - ì™„ë²½ ê°€ì´ë“œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 3px solid #667eea;
            overflow-x: auto;
            flex-wrap: wrap;
        }

        .tab {
            padding: 20px 30px;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 1em;
            font-weight: 600;
            color: #555;
            transition: all 0.3s ease;
            position: relative;
            white-space: nowrap;
        }

        .tab:hover {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }

        .tab.active {
            background: white;
            color: #667eea;
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            right: 0;
            height: 3px;
            background: #667eea;
        }

        .content {
            padding: 40px;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        h3 {
            color: #764ba2;
            font-size: 1.5em;
            margin: 30px 0 15px 0;
        }

        .diagram {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }

        .flow-step {
            background: white;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 15px 0;
            border-radius: 5px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .flow-step:hover {
            transform: translateX(10px);
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
        }

        .flow-step h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .flow-arrow {
            text-align: center;
            color: #667eea;
            font-size: 2em;
            margin: 10px 0;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .code-block .keyword {
            color: #ff79c6;
        }

        .code-block .string {
            color: #50fa7b;
        }

        .code-block .comment {
            color: #6272a4;
            font-style: italic;
        }

        .code-block .annotation {
            color: #8be9fd;
        }

        .component-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .component-box:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .component-box h4 {
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .component-details {
            display: none;
            background: white;
            color: #333;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #667eea;
        }

        .component-details.active {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                max-height: 0;
            }
            to {
                opacity: 1;
                max-height: 1000px;
            }
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #e9ecef;
        }

        .comparison-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .comparison-table tr:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .timeline {
            position: relative;
            padding-left: 50px;
            margin: 30px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: #667eea;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -38px;
            top: 20px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #667eea;
            border: 3px solid white;
            box-shadow: 0 0 0 3px #667eea;
        }

        .highlight-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .highlight-box.success {
            background: #d4edda;
            border-left-color: #28a745;
        }

        .highlight-box.error {
            background: #f8d7da;
            border-left-color: #dc3545;
        }

        .highlight-box.info {
            background: #d1ecf1;
            border-left-color: #17a2b8;
        }

        .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-right: 5px;
        }

        .badge.phase {
            background: #667eea;
            color: white;
        }

        .badge.component {
            background: #764ba2;
            color: white;
        }

        .badge.action {
            background: #28a745;
            color: white;
        }

        .interactive-diagram {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .diagram-box {
            background: white;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .diagram-box:hover {
            background: #667eea;
            color: white;
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .diagram-box .icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        footer {
            background: #2d2d2d;
            color: white;
            text-align: center;
            padding: 30px;
            margin-top: 40px;
        }

        @media (max-width: 768px) {
            .container {
                border-radius: 0;
            }

            header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .tabs {
                flex-direction: column;
            }

            .tab {
                border-bottom: 1px solid #e9ecef;
            }

            .timeline {
                padding-left: 30px;
            }

            .timeline::before {
                left: 10px;
            }

            .timeline-item::before {
                left: -28px;
            }
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .process-flow {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .process-step {
            flex: 1;
            min-width: 150px;
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            margin: 10px;
            transition: all 0.3s ease;
        }

        .process-step:hover {
            background: #667eea;
            color: white;
            transform: scale(1.05);
        }

        .process-arrow {
            font-size: 2em;
            color: #667eea;
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸš€ ìŠ¤í”„ë§ íŠ¸ëœì­ì…˜ AOP ë™ì‘ íë¦„</h1>
            <p>@Transactionalì´ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì™„ë²½í•˜ê²Œ ì´í•´í•˜ê¸°</p>
        </header>

        <div class="tabs">
            <button class="tab active" onclick="showTab('overview')">ğŸ“Š ì „ì²´ ê°œìš”</button>
            <button class="tab" onclick="showTab('proxy-creation')">ğŸ”§ í”„ë¡ì‹œ ìƒì„±</button>
            <button class="tab" onclick="showTab('runtime-flow')">âš¡ ëŸ°íƒ€ì„ íë¦„</button>
            <button class="tab" onclick="showTab('components')">ğŸ§© í•µì‹¬ ì»´í¬ë„ŒíŠ¸</button>
            <button class="tab" onclick="showTab('propagation')">ğŸ”„ ì „íŒŒ ì†ì„±</button>
            <button class="tab" onclick="showTab('scenarios')">âœ… ì„±ê³µ/ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤</button>
            <button class="tab" onclick="showTab('threadlocal')">ğŸ§µ ThreadLocal</button>
        </div>

        <div class="content">
            <!-- Tab 1: ì „ì²´ ê°œìš” -->
            <div id="overview" class="tab-content active">
                <h2>ğŸ“Š ì „ì²´ ì•„í‚¤í…ì²˜ ê°œìš”</h2>
                
                <div class="highlight-box info">
                    <strong>í•µì‹¬ í¬ì¸íŠ¸:</strong> ìŠ¤í”„ë§ì€ AOP í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ì—¬ @Transactional ë©”ì„œë“œë¥¼ ìë™ìœ¼ë¡œ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ê°ì‹¸ì¤ë‹ˆë‹¤.
                </div>

                <h3>ì „ì²´ ë™ì‘ ê³¼ì •</h3>
                <div class="process-flow">
                    <div class="process-step">
                        <strong>1ë‹¨ê³„</strong><br>
                        ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘
                    </div>
                    <div class="process-arrow">â†’</div>
                    <div class="process-step">
                        <strong>2ë‹¨ê³„</strong><br>
                        í”„ë¡ì‹œ ìƒì„±
                    </div>
                    <div class="process-arrow">â†’</div>
                    <div class="process-step">
                        <strong>3ë‹¨ê³„</strong><br>
                        ë©”ì„œë“œ í˜¸ì¶œ
                    </div>
                    <div class="process-arrow">â†’</div>
                    <div class="process-step">
                        <strong>4ë‹¨ê³„</strong><br>
                        íŠ¸ëœì­ì…˜ ì²˜ë¦¬
                    </div>
                </div>

                <h3>í•µì‹¬ ì»´í¬ë„ŒíŠ¸</h3>
                <div class="interactive-diagram">
                    <div class="diagram-box">
                        <div class="icon">ğŸ¯</div>
                        <h4>@Transactional</h4>
                        <p>íŠ¸ëœì­ì…˜ ì„ ì–¸</p>
                    </div>
                    <div class="diagram-box">
                        <div class="icon">ğŸ”„</div>
                        <h4>AOP Proxy</h4>
                        <p>ë©”ì„œë“œ ì¸í„°ì…‰íŠ¸</p>
                    </div>
                    <div class="diagram-box">
                        <div class="icon">âš™ï¸</div>
                        <h4>Transaction Manager</h4>
                        <p>íŠ¸ëœì­ì…˜ ê´€ë¦¬</p>
                    </div>
                    <div class="diagram-box">
                        <div class="icon">ğŸ§µ</div>
                        <h4>Synchronization Manager</h4>
                        <p>Connection ë™ê¸°í™”</p>
                    </div>
                </div>

                <h3>ë ˆì´ì–´ êµ¬ì¡°</h3>
                <div class="diagram">
                    <div class="flow-step">
                        <h4><span class="badge phase">Layer 1</span> Client (Controller)</h4>
                        <p>ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í˜¸ì¶œ</p>
                    </div>
                    <div class="flow-arrow">â†“</div>
                    <div class="flow-step">
                        <h4><span class="badge phase">Layer 2</span> Proxy (CGLIB/JDK Dynamic)</h4>
                        <p>TransactionInterceptorê°€ ë©”ì„œë“œ ì¸í„°ì…‰íŠ¸</p>
                    </div>
                    <div class="flow-arrow">â†“</div>
                    <div class="flow-step">
                        <h4><span class="badge phase">Layer 3</span> Transaction Manager</h4>
                        <p>íŠ¸ëœì­ì…˜ ì‹œì‘/ì»¤ë°‹/ë¡¤ë°±</p>
                    </div>
                    <div class="flow-arrow">â†“</div>
                    <div class="flow-step">
                        <h4><span class="badge phase">Layer 4</span> DataSource/EntityManager</h4>
                        <p>ì‹¤ì œ DB Connection ê´€ë¦¬</p>
                    </div>
                </div>

                <div class="code-block">
<span class="comment">// ê°œë°œìê°€ ì‘ì„±í•˜ëŠ” ì½”ë“œ</span>
<span class="annotation">@Service</span>
<span class="keyword">public class</span> OrderService {
    
    <span class="annotation">@Transactional</span> <span class="comment">// ì´ê²ƒë§Œ ë¶™ì´ë©´!</span>
    <span class="keyword">public void</span> createOrder(Order order) {
        orderRepository.save(order);
        paymentService.processPayment(order.getId());
    }
}

<span class="comment">// ìŠ¤í”„ë§ì´ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒ:</span>
<span class="comment">// 1. í”„ë¡ì‹œ ìƒì„± (ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ)</span>
<span class="comment">// 2. íŠ¸ëœì­ì…˜ ì‹œì‘ (ë©”ì„œë“œ í˜¸ì¶œ ì „)</span>
<span class="comment">// 3. ì‹¤ì œ ë©”ì„œë“œ ì‹¤í–‰</span>
<span class="comment">// 4. íŠ¸ëœì­ì…˜ ì»¤ë°‹ (ì„±ê³µ ì‹œ) ë˜ëŠ” ë¡¤ë°± (ì‹¤íŒ¨ ì‹œ)</span>
                </div>
            </div>

            <!-- Tab 2: í”„ë¡ì‹œ ìƒì„± -->
            <div id="proxy-creation" class="tab-content">
                <h2>ğŸ”§ í”„ë¡ì‹œ ìƒì„± ê³¼ì • (ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ)</h2>

                <div class="highlight-box">
                    <strong>â° ì–¸ì œ?</strong> ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ (SpringApplication.run() ì‹¤í–‰ ì¤‘)<br>
                    <strong>ğŸ“¦ ë¬´ì—‡ì„?</strong> @Transactionalì´ ë¶™ì€ í´ë˜ìŠ¤ì˜ í”„ë¡ì‹œ ê°ì²´ ìƒì„±<br>
                    <strong>ğŸ¯ ì™œ?</strong> ëŸ°íƒ€ì„ì— ë©”ì„œë“œ í˜¸ì¶œì„ ì¸í„°ì…‰íŠ¸í•˜ê¸° ìœ„í•´
                </div>

                <h3>íƒ€ì„ë¼ì¸</h3>
                <div class="timeline">
                    <div class="timeline-item">
                        <span class="badge phase">T0</span>
                        <h4>ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘</h4>
                        <div class="code-block">SpringApplication.run(Application.<span class="keyword">class</span>, args);</div>
                    </div>

                    <div class="timeline-item">
                        <span class="badge phase">T1</span>
                        <h4>ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™”</h4>
                        <p>@ComponentScanìœ¼ë¡œ @Service, @Repository ë“± ìŠ¤ìº”</p>
                    </div>

                    <div class="timeline-item">
                        <span class="badge phase">T2</span>
                        <h4>ë¹ˆ ì •ì˜ ë“±ë¡</h4>
                        <p>OrderService, PaymentService ë“±ì˜ BeanDefinition ìƒì„±</p>
                    </div>

                    <div class="timeline-item">
                        <span class="badge phase">T3</span>
                        <h4>ì›ë³¸ ë¹ˆ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±</h4>
                        <div class="code-block">OrderService orderService = <span class="keyword">new</span> OrderService();</div>
                    </div>

                    <div class="timeline-item">
                        <span class="badge phase">T4</span>
                        <h4>BeanPostProcessor ì‹¤í–‰ â­</h4>
                        <p>AbstractAutoProxyCreatorê°€ @Transactional ê°ì§€</p>
                        <div class="code-block">
<span class="keyword">if</span> (hasTransactionalAnnotation(bean)) {
    <span class="comment">// í”„ë¡ì‹œ ìƒì„±!</span>
    <span class="keyword">return</span> createProxy(bean);
}
                        </div>
                    </div>

                    <div class="timeline-item">
                        <span class="badge phase">T5</span>
                        <h4>í”„ë¡ì‹œ ìƒì„± (CGLIB)</h4>
                        <div class="code-block">
<span class="comment">// ìƒì„±ëœ í´ë˜ìŠ¤:</span>
OrderService$$EnhancerBySpringCGLIB$$12345678
    <span class="keyword">extends</span> OrderService {
    <span class="keyword">private</span> OrderService target; <span class="comment">// ì›ë³¸</span>
    <span class="keyword">private</span> TransactionInterceptor interceptor;
}
                        </div>
                    </div>

                    <div class="timeline-item">
                        <span class="badge phase">T6</span>
                        <h4>í”„ë¡ì‹œë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡</h4>
                        <p>ì›ë³¸ ëŒ€ì‹  í”„ë¡ì‹œê°€ ë¹ˆìœ¼ë¡œ ë“±ë¡ë¨!</p>
                        <div class="highlight-box success">
                            <strong>âœ… ì™„ë£Œ:</strong> ì´ì œ ë‹¤ë¥¸ ë¹ˆë“¤ì´ ì£¼ì…ë°›ì„ ë•Œ í”„ë¡ì‹œë¥¼ ë°›ê²Œ ë¨
                        </div>
                    </div>
                </div>

                <h3>í”„ë¡ì‹œ êµ¬ì¡°</h3>
                <div class="diagram">
                    <div class="code-block">
<span class="comment">// ìŠ¤í”„ë§ì´ ìƒì„±í•œ í”„ë¡ì‹œ (ê°œë…ì  í‘œí˜„)</span>
<span class="keyword">public class</span> OrderService$$CGLIB <span class="keyword">extends</span> OrderService {
    
    <span class="keyword">private</span> OrderService target; <span class="comment">// ì›ë³¸ ê°ì²´</span>
    <span class="keyword">private</span> TransactionInterceptor interceptor;
    
    <span class="annotation">@Override</span>
    <span class="keyword">public void</span> createOrder(Order order) {
        <span class="comment">// 1. TransactionInterceptor í˜¸ì¶œ</span>
        MethodInvocation invocation = <span class="keyword">new</span> MethodInvocation(
            target, <span class="string">"createOrder"</span>, <span class="keyword">new</span> Object[]{order}
        );
        
        <span class="comment">// 2. íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ìœ„ì„</span>
        interceptor.invoke(invocation);
        
        <span class="comment">// ì‹¤ì œ ë©”ì„œë“œëŠ” interceptor ë‚´ë¶€ì—ì„œ í˜¸ì¶œë¨</span>
    }
}
                    </div>
                </div>

                <div class="component-box" onclick="toggleDetails('proxy-types')">
                    <h4>ğŸ” í”„ë¡ì‹œ ìƒì„± ë°©ì‹: JDK Dynamic vs CGLIB</h4>
                    <p>í´ë¦­í•˜ì—¬ ìƒì„¸ ë¹„êµ ë³´ê¸°</p>
                </div>
                <div id="proxy-types" class="component-details">
                    <table class="comparison-table">
                        <tr>
                            <th>êµ¬ë¶„</th>
                            <th>JDK Dynamic Proxy</th>
                            <th>CGLIB Proxy (ê¸°ë³¸)</th>
                        </tr>
                        <tr>
                            <td><strong>ì¡°ê±´</strong></td>
                            <td>ì¸í„°í˜ì´ìŠ¤ í•„ìˆ˜</td>
                            <td>ì¸í„°í˜ì´ìŠ¤ ë¶ˆí•„ìš”</td>
                        </tr>
                        <tr>
                            <td><strong>ë°©ì‹</strong></td>
                            <td>ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„</td>
                            <td>í´ë˜ìŠ¤ ìƒì†</td>
                        </tr>
                        <tr>
                            <td><strong>ì„±ëŠ¥</strong></td>
                            <td>ë¹ ë¥¸ ìƒì„±</td>
                            <td>ë¹ ë¥¸ ì‹¤í–‰</td>
                        </tr>
                        <tr>
                            <td><strong>ì œì•½</strong></td>
                            <td>ì¸í„°í˜ì´ìŠ¤ ë©”ì„œë“œë§Œ</td>
                            <td>final ë©”ì„œë“œ ë¶ˆê°€</td>
                        </tr>
                        <tr>
                            <td><strong>ìŠ¤í”„ë§ ë¶€íŠ¸</strong></td>
                            <td>-</td>
                            <td>âœ… ê¸°ë³¸ê°’</td>
                        </tr>
                    </table>
                </div>
            </div>

            <!-- Tab 3: ëŸ°íƒ€ì„ íë¦„ -->
            <div id="runtime-flow" class="tab-content">
                <h2>âš¡ ëŸ°íƒ€ì„ íŠ¸ëœì­ì…˜ ì‹¤í–‰ íë¦„</h2>

                <div class="highlight-box">
                    <strong>ì‹œë‚˜ë¦¬ì˜¤:</strong> HTTP ìš”ì²­ìœ¼ë¡œ OrderService.createOrder() ë©”ì„œë“œ í˜¸ì¶œ
                </div>

                <h3>ì „ì²´ í˜¸ì¶œ ìŠ¤íƒ</h3>
                <div class="diagram">
                    <div class="flow-step">
                        <h4><span class="badge action">Step 1</span> HTTP ìš”ì²­ ë„ì°©</h4>
                        <div class="code-block">POST /orders</div>
                    </div>
                    <div class="flow-arrow">â†“</div>
                    
                    <div class="flow-step">
                        <h4><span class="badge action">Step 2</span> Controller í˜¸ì¶œ</h4>
                        <div class="code-block">
<span class="annotation">@PostMapping</span>(<span class="string">"/orders"</span>)
<span class="keyword">public void</span> create() {
    orderService.createOrder(order); <span class="comment">// í”„ë¡ì‹œ í˜¸ì¶œ!</span>
}
                        </div>
                    </div>
                    <div class="flow-arrow">â†“</div>
                    
                    <div class="flow-step">
                        <h4><span class="badge action">Step 3</span> Proxy ì§„ì…</h4>
                        <p>OrderService$$CGLIB.createOrder() í˜¸ì¶œë¨</p>
                        <div class="highlight-box info">
                            ğŸ’¡ ì—¬ê¸°ì„œë¶€í„° íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ì‹œì‘!
                        </div>
                    </div>
                    <div class="flow-arrow">â†“</div>
                    
                    <div class="flow-step">
                        <h4><span class="badge action">Step 4</span> TransactionInterceptor.invoke()</h4>
                        <div class="code-block">
<span class="keyword">public</span> Object invoke(MethodInvocation invocation) {
    <span class="comment">// @Transactional ì†ì„± ì½ê¸°</span>
    <span class="keyword">return</span> invokeWithinTransaction(
        method, targetClass, invocation::proceed
    );
}
                        </div>
                    </div>
                    <div class="flow-arrow">â†“</div>
                    
                    <div class="flow-step">
                        <h4><span class="badge action">Step 5</span> Transaction Manager í˜¸ì¶œ</h4>
                        <p>PlatformTransactionManager.getTransaction()</p>
                    </div>
                    <div class="flow-arrow">â†“</div>
                    
                    <div class="flow-step">
                        <h4><span class="badge action">Step 6</span> íŠ¸ëœì­ì…˜ ì‹œì‘ ğŸ¬</h4>
                        <div class="code-block">
<span class="comment">// 1. Connection íšë“</span>
Connection conn = dataSource.getConnection();

<span class="comment">// 2. ìë™ ì»¤ë°‹ ë„ê¸°</span>
conn.setAutoCommit(<span class="keyword">false</span>);

<span class="comment">// 3. ThreadLocalì— ì €ì¥</span>
TransactionSynchronizationManager.bindResource(
    dataSource, <span class="keyword">new</span> ConnectionHolder(conn)
);
                        </div>
                    </div>
                    <div class="flow-arrow">â†“</div>
                    
                    <div class="flow-step">
                        <h4><span class="badge action">Step 7</span> ì‹¤ì œ ë©”ì„œë“œ ì‹¤í–‰ ğŸš€</h4>
                        <div class="code-block">
<span class="comment">// ì›ë³¸ OrderService.createOrder() ì‹¤í–‰</span>
orderRepository.save(order);
paymentService.processPayment(order.getId());
                        </div>
                    </div>
                    <div class="flow-arrow">â†“</div>
                    
                    <div class="flow-step">
                        <h4><span class="badge action">Step 8</span> Repositoryì—ì„œ Connection ì‚¬ìš©</h4>
                        <div class="code-block">
<span class="comment">// ThreadLocalì—ì„œ ê°™ì€ Connection ê°€ì ¸ì˜´!</span>
Connection conn = TransactionSynchronizationManager
    .getResource(dataSource);

<span class="comment">// SQL ì‹¤í–‰ (ì•„ì§ ì»¤ë°‹ ì•ˆë¨)</span>
conn.prepareStatement(<span class="string">"INSERT INTO orders..."</span>)
    .executeUpdate();
                        </div>
                    </div>
                    <div class="flow-arrow">â†“</div>
                    
                    <div class="flow-step">
                        <h4><span class="badge action">Step 9</span> ì¤‘ì²© íŠ¸ëœì­ì…˜ (REQUIRED)</h4>
                        <div class="code-block">
<span class="comment">// PaymentServiceë„ @Transactional</span>
<span class="comment">// â†’ ê¸°ì¡´ íŠ¸ëœì­ì…˜ì— ì°¸ì—¬ (ìƒˆë¡œ ë§Œë“¤ì§€ ì•ŠìŒ)</span>
paymentService.processPayment(orderId);
                        </div>
                        <div class="highlight-box">
                            <strong>ì¤‘ìš”:</strong> ê°™ì€ Connection, ê°™ì€ íŠ¸ëœì­ì…˜ ì‚¬ìš©!
                        </div>
                    </div>
                    <div class="flow-arrow">â†“</div>
                    
                    <div class="flow-step">
                        <h4><span class="badge action">Step 10</span> ë©”ì„œë“œ ì™„ë£Œ</h4>
                        <p>ì˜ˆì™¸ ì—†ì´ ì •ìƒ ì¢…ë£Œ</p>
                    </div>
                    <div class="flow-arrow">â†“</div>
                    
                    <div class="flow-step">
                        <h4><span class="badge action">Step 11</span> íŠ¸ëœì­ì…˜ ì»¤ë°‹ âœ…</h4>
                        <div class="code-block">
<span class="comment">// 1. DBì— ì»¤ë°‹</span>
conn.commit();

<span class="comment">// 2. ThreadLocal ì •ë¦¬</span>
TransactionSynchronizationManager.unbindResource(dataSource);

<span class="comment">// 3. Connection ë°˜í™˜ (ì»¤ë„¥ì…˜ í’€ë¡œ)</span>
conn.close();
                        </div>
                    </div>
                </div>

                <h3>ìŠ¤ë ˆë“œë³„ ì‹¤í–‰ ìƒíƒœ</h3>
                <div class="diagram">
                    <div class="code-block">
Thread: http-nio-8080-exec-1
    â”‚
    â”œâ”€ ThreadLocal&lt;Connection&gt;
    â”‚   â””â”€ HikariProxyConnection@abc123
    â”‚       â”œâ”€ autoCommit: <span class="keyword">false</span>
    â”‚       â”œâ”€ isolation: READ_COMMITTED
    â”‚       â””â”€ status: ACTIVE
    â”‚
    â”œâ”€ TransactionStatus
    â”‚   â”œâ”€ newTransaction: <span class="keyword">true</span>
    â”‚   â”œâ”€ readOnly: <span class="keyword">false</span>
    â”‚   â””â”€ completed: <span class="keyword">false</span>
    â”‚
    â””â”€ ì‹¤í–‰ ì¤‘ì¸ ë©”ì„œë“œ
        â”œâ”€ OrderService.createOrder()
        â”‚   â”œâ”€ orderRepository.save() âœ…
        â”‚   â””â”€ PaymentService.processPayment()
        â”‚       â””â”€ paymentRepository.save() âœ…
                    </div>
                </div>
            </div>

            <!-- Tab 4: í•µì‹¬ ì»´í¬ë„ŒíŠ¸ -->
            <div id="components" class="tab-content">
                <h2>ğŸ§© í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ìƒì„¸</h2>

                <div class="component-box" onclick="toggleDetails('comp-interceptor')">
                    <h4>1ï¸âƒ£ TransactionInterceptor</h4>
                    <p>ë©”ì„œë“œ í˜¸ì¶œì„ ì¸í„°ì…‰íŠ¸í•˜ê³  íŠ¸ëœì­ì…˜ ë¡œì§ ì ìš©</p>
                </div>
                <div id="comp-interceptor" class="component-details">
                    <h4>ì—­í• </h4>
                    <ul>
                        <li>@Transactional ì†ì„± íŒŒì‹±</li>
                        <li>TransactionManagerì—ê²Œ íŠ¸ëœì­ì…˜ ì‹œì‘ ìš”ì²­</li>
                        <li>ì‹¤ì œ ë©”ì„œë“œ ì‹¤í–‰</li>
                        <li>ì„±ê³µ ì‹œ ì»¤ë°‹, ì‹¤íŒ¨ ì‹œ ë¡¤ë°±</li>
                    </ul>
                    <div class="code-block">
<span class="keyword">public class</span> TransactionInterceptor {
    
    <span class="keyword">public</span> Object invoke(MethodInvocation invocation) {
        <span class="comment">// 1. @Transactional ì†ì„± ì½ê¸°</span>
        TransactionAttribute txAttr = getTransactionAttribute();
        
        <span class="comment">// 2. Transaction Manager ì°¾ê¸°</span>
        PlatformTransactionManager tm = determineTransactionManager();
        
        <span class="comment">// 3. íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ ì‹¤í–‰</span>
        <span class="keyword">try</span> {
            TransactionStatus status = tm.getTransaction(txAttr);
            Object result = invocation.proceed(); <span class="comment">// ì‹¤ì œ ë©”ì„œë“œ</span>
            tm.commit(status);
            <span class="keyword">return</span> result;
        } <span class="keyword">catch</span> (Exception e) {
            tm.rollback(status);
            <span class="keyword">throw</span> e;
        }
    }
}
                    </div>
                </div>

                <div class="component-box" onclick="toggleDetails('comp-manager')">
                    <h4>2ï¸âƒ£ PlatformTransactionManager</h4>
                    <p>íŠ¸ëœì­ì…˜ì„ ì‹¤ì œë¡œ ì‹œì‘/ì»¤ë°‹/ë¡¤ë°±í•˜ëŠ” ë§¤ë‹ˆì €</p>
                </div>
                <div id="comp-manager" class="component-details">
                    <h4>êµ¬í˜„ì²´</h4>
                    <table class="comparison-table">
                        <tr>
                            <th>êµ¬í˜„ì²´</th>
                            <th>ì‚¬ìš© ê¸°ìˆ </th>
                            <th>ê´€ë¦¬ ëŒ€ìƒ</th>
                        </tr>
                        <tr>
                            <td><strong>DataSourceTransactionManager</strong></td>
                            <td>JDBC, MyBatis</td>
                            <td>Connection</td>
                        </tr>
                        <tr>
                            <td><strong>JpaTransactionManager</strong></td>
                            <td>JPA, Hibernate</td>
                            <td>EntityManager</td>
                        </tr>
                        <tr>
                            <td><strong>JtaTransactionManager</strong></td>
                            <td>ë¶„ì‚° íŠ¸ëœì­ì…˜</td>
                            <td>XA Resource</td>
                        </tr>
                    </table>

                    <h4>í•µì‹¬ ë©”ì„œë“œ</h4>
                    <div class="code-block">
<span class="keyword">public interface</span> PlatformTransactionManager {
    
    <span class="comment">// íŠ¸ëœì­ì…˜ ì‹œì‘ (ë˜ëŠ” ê¸°ì¡´ íŠ¸ëœì­ì…˜ ì°¸ì—¬)</span>
    TransactionStatus getTransaction(TransactionDefinition def);
    
    <span class="comment">// íŠ¸ëœì­ì…˜ ì»¤ë°‹</span>
    <span class="keyword">void</span> commit(TransactionStatus status);
    
    <span class="comment">// íŠ¸ëœì­ì…˜ ë¡¤ë°±</span>
    <span class="keyword">void</span> rollback(TransactionStatus status);
}
                    </div>
                </div>

                <div class="component-box" onclick="toggleDetails('comp-sync')">
                    <h4>3ï¸âƒ£ TransactionSynchronizationManager</h4>
                    <p>ThreadLocal ê¸°ë°˜ íŠ¸ëœì­ì…˜ ë¦¬ì†ŒìŠ¤ ë™ê¸°í™”</p>
                </div>
                <div id="comp-sync" class="component-details">
                    <h4>ì—­í• </h4>
                    <ul>
                        <li>í˜„ì¬ ìŠ¤ë ˆë“œì˜ Connectionì„ ThreadLocalì— ì €ì¥</li>
                        <li>ê°™ì€ ìŠ¤ë ˆë“œ ë‚´ ëª¨ë“  ì½”ë“œê°€ ê°™ì€ Connection ê³µìœ </li>
                        <li>íŠ¸ëœì­ì…˜ ì •ë³´ ì €ì¥ (readOnly, isolation ë“±)</li>
                    </ul>

                    <div class="code-block">
<span class="keyword">public abstract class</span> TransactionSynchronizationManager {
    
    <span class="comment">// ThreadLocal ë³€ìˆ˜</span>
    <span class="keyword">private static final</span> ThreadLocal&lt;Map&lt;Object, Object&gt;&gt; 
        resources = <span class="keyword">new</span> ThreadLocal&lt;&gt;();
    
    <span class="comment">// Connection ì €ì¥</span>
    <span class="keyword">public static void</span> bindResource(
        Object key, Object value) {
        
        Map&lt;Object, Object&gt; map = resources.get();
        <span class="keyword">if</span> (map == <span class="keyword">null</span>) {
            map = <span class="keyword">new</span> HashMap&lt;&gt;();
            resources.set(map);
        }
        map.put(key, value); <span class="comment">// DataSource â†’ Connection</span>
    }
    
    <span class="comment">// Connection ê°€ì ¸ì˜¤ê¸°</span>
    <span class="keyword">public static</span> Object getResource(Object key) {
        Map&lt;Object, Object&gt; map = resources.get();
        <span class="keyword">return</span> map != <span class="keyword">null</span> ? map.get(key) : <span class="keyword">null</span>;
    }
}
                    </div>

                    <div class="highlight-box">
                        <strong>ì™œ ThreadLocal?</strong><br>
                        â€¢ ìŠ¤ë ˆë“œë§ˆë‹¤ ë…ë¦½ì ì¸ Connection ë³´ì¥<br>
                        â€¢ Connectionì„ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•  í•„ìš” ì—†ìŒ<br>
                        â€¢ ê°™ì€ íŠ¸ëœì­ì…˜ ë‚´ ëª¨ë“  Repositoryê°€ ê°™ì€ Connection ì‚¬ìš©
                    </div>
                </div>

                <div class="component-box" onclick="toggleDetails('comp-status')">
                    <h4>4ï¸âƒ£ TransactionStatus</h4>
                    <p>í˜„ì¬ íŠ¸ëœì­ì…˜ì˜ ìƒíƒœ ì •ë³´</p>
                </div>
                <div id="comp-status" class="component-details">
                    <h4>ì£¼ìš” ì •ë³´</h4>
                    <div class="code-block">
<span class="keyword">public interface</span> TransactionStatus {
    
    <span class="comment">// ìƒˆë¡œìš´ íŠ¸ëœì­ì…˜ì¸ê°€? (vs ê¸°ì¡´ íŠ¸ëœì­ì…˜ ì°¸ì—¬)</span>
    <span class="keyword">boolean</span> isNewTransaction();
    
    <span class="comment">// ë¡¤ë°± ì „ìš©ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆëŠ”ê°€?</span>
    <span class="keyword">boolean</span> isRollbackOnly();
    
    <span class="comment">// íŠ¸ëœì­ì…˜ì´ ì™„ë£Œë˜ì—ˆëŠ”ê°€?</span>
    <span class="keyword">boolean</span> isCompleted();
    
    <span class="comment">// ì„¸ì´ë¸Œí¬ì¸íŠ¸ê°€ ìˆëŠ”ê°€?</span>
    <span class="keyword">boolean</span> hasSavepoint();
}
                    </div>

                    <p><strong>ì‚¬ìš© ì˜ˆ:</strong> REQUIRED ì „íŒŒ ì†ì„±ì—ì„œ ê¸°ì¡´ íŠ¸ëœì­ì…˜ ì°¸ì—¬ ì‹œ isNewTransaction()ì€ falseë¥¼ ë°˜í™˜í•˜ì—¬, ì»¤ë°‹/ë¡¤ë°±ì„ í•˜ì§€ ì•Šê³  ì™¸ë¶€ íŠ¸ëœì­ì…˜ì— ìœ„ì„í•©ë‹ˆë‹¤.</p>
                </div>
            </div>

            <!-- Tab 5: ì „íŒŒ ì†ì„± -->
            <div id="propagation" class="tab-content">
                <h2>ğŸ”„ íŠ¸ëœì­ì…˜ ì „íŒŒ ì†ì„± (Propagation)</h2>

                <div class="highlight-box">
                    <strong>ì „íŒŒ ì†ì„±ì´ë€?</strong> íŠ¸ëœì­ì…˜ ë©”ì„œë“œê°€ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ, íŠ¸ëœì­ì…˜ì„ ì–´ë–»ê²Œ ì²˜ë¦¬í• ì§€ ê²°ì •í•˜ëŠ” ì„¤ì •
                </div>

                <h3>ì£¼ìš” ì „íŒŒ ì†ì„± ë¹„êµ</h3>
                <table class="comparison-table">
                    <tr>
                        <th>ì†ì„±</th>
                        <th>ê¸°ì¡´ íŠ¸ëœì­ì…˜ O</th>
                        <th>ê¸°ì¡´ íŠ¸ëœì­ì…˜ X</th>
                        <th>ì‚¬ìš© ì‚¬ë¡€</th>
                    </tr>
                    <tr>
                        <td><strong>REQUIRED</strong><br>(ê¸°ë³¸ê°’)</td>
                        <td>ê¸°ì¡´ ì°¸ì—¬</td>
                        <td>ìƒˆë¡œ ìƒì„±</td>
                        <td>ëŒ€ë¶€ë¶„ì˜ ê²½ìš°</td>
                    </tr>
                    <tr>
                        <td><strong>REQUIRES_NEW</strong></td>
                        <td>ìƒˆë¡œ ìƒì„±<br>(ê¸°ì¡´ ì¤‘ë‹¨)</td>
                        <td>ìƒˆë¡œ ìƒì„±</td>
                        <td>ë…ë¦½ì ì¸ íŠ¸ëœì­ì…˜<br>(ë¡œê·¸ ê¸°ë¡ ë“±)</td>
                    </tr>
                    <tr>
                        <td><strong>SUPPORTS</strong></td>
                        <td>ê¸°ì¡´ ì°¸ì—¬</td>
                        <td>íŠ¸ëœì­ì…˜ ì—†ì´ ì‹¤í–‰</td>
                        <td>ì½ê¸° ì „ìš© ë©”ì„œë“œ</td>
                    </tr>
                    <tr>
                        <td><strong>MANDATORY</strong></td>
                        <td>ê¸°ì¡´ ì°¸ì—¬</td>
                        <td>ì˜ˆì™¸ ë°œìƒ</td>
                        <td>ë°˜ë“œì‹œ íŠ¸ëœì­ì…˜ í•„ìš”</td>
                    </tr>
                    <tr>
                        <td><strong>NOT_SUPPORTED</strong></td>
                        <td>íŠ¸ëœì­ì…˜ ì¤‘ë‹¨</td>
                        <td>íŠ¸ëœì­ì…˜ ì—†ì´ ì‹¤í–‰</td>
                        <td>íŠ¸ëœì­ì…˜ ë¶ˆí•„ìš”</td>
                    </tr>
                    <tr>
                        <td><strong>NEVER</strong></td>
                        <td>ì˜ˆì™¸ ë°œìƒ</td>
                        <td>íŠ¸ëœì­ì…˜ ì—†ì´ ì‹¤í–‰</td>
                        <td>íŠ¸ëœì­ì…˜ ê¸ˆì§€</td>
                    </tr>
                    <tr>
                        <td><strong>NESTED</strong></td>
                        <td>ì¤‘ì²© íŠ¸ëœì­ì…˜</td>
                        <td>ìƒˆë¡œ ìƒì„±</td>
                        <td>ë¶€ë¶„ ë¡¤ë°± í•„ìš”</td>
                    </tr>
                </table>

                <h3>1. REQUIRED (ê°€ì¥ ë§ì´ ì‚¬ìš©) â­</h3>
                <div class="diagram">
                    <div class="code-block">
<span class="annotation">@Service</span>
<span class="keyword">public class</span> OrderService {
    
    <span class="annotation">@Transactional</span> <span class="comment">// REQUIRED (ê¸°ë³¸ê°’)</span>
    <span class="keyword">public void</span> createOrder(Order order) {
        <span class="comment">// íŠ¸ëœì­ì…˜ A ì‹œì‘</span>
        orderRepository.save(order);
        
        <span class="comment">// PaymentServiceë„ REQUIRED</span>
        <span class="comment">// â†’ íŠ¸ëœì­ì…˜ Aì— ì°¸ì—¬ (ìƒˆë¡œ ë§Œë“¤ì§€ ì•ŠìŒ)</span>
        paymentService.processPayment(order.getId());
        
        <span class="comment">// ë‘˜ ë‹¤ ê°™ì€ íŠ¸ëœì­ì…˜</span>
        <span class="comment">// í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ ì „ì²´ ë¡¤ë°±!</span>
    }
}

<span class="annotation">@Service</span>
<span class="keyword">public class</span> PaymentService {
    <span class="annotation">@Transactional</span>
    <span class="keyword">public void</span> processPayment(Long orderId) {
        paymentRepository.save(payment);
    }
}
                    </div>

                    <div class="flow-step">
                        <h4>ì‹¤í–‰ íë¦„</h4>
                        <div class="highlight-box success">
                            âœ… createOrder() â†’ íŠ¸ëœì­ì…˜ A ì‹œì‘<br>
                            âœ… orderRepository.save() â†’ íŠ¸ëœì­ì…˜ A ì‚¬ìš©<br>
                            âœ… processPayment() â†’ íŠ¸ëœì­ì…˜ A ì°¸ì—¬ (ìƒˆë¡œ ë§Œë“¤ì§€ ì•ŠìŒ)<br>
                            âœ… paymentRepository.save() â†’ íŠ¸ëœì­ì…˜ A ì‚¬ìš©<br>
                            âœ… ë©”ì„œë“œ ì™„ë£Œ â†’ íŠ¸ëœì­ì…˜ A ì»¤ë°‹
                        </div>
                    </div>
                </div>

                <h3>2. REQUIRES_NEW (ë…ë¦½ íŠ¸ëœì­ì…˜)</h3>
                <div class="diagram">
                    <div class="code-block">
<span class="annotation">@Service</span>
<span class="keyword">public class</span> OrderService {
    
    <span class="annotation">@Transactional</span>
    <span class="keyword">public void</span> createOrder(Order order) {
        <span class="comment">// íŠ¸ëœì­ì…˜ A</span>
        orderRepository.save(order);
        
        <span class="comment">// ë¡œê·¸ëŠ” ë³„ë„ íŠ¸ëœì­ì…˜ìœ¼ë¡œ (í•­ìƒ ì»¤ë°‹)</span>
        logService.log(<span class="string">"ì£¼ë¬¸ ìƒì„±"</span>);
        
        <span class="comment">// ì˜ˆì™¸ ë°œìƒ â†’ ì£¼ë¬¸ì€ ë¡¤ë°±, ë¡œê·¸ëŠ” ì»¤ë°‹!</span>
        <span class="keyword">throw new</span> RuntimeException(<span class="string">"ì£¼ë¬¸ ì‹¤íŒ¨"</span>);
    }
}

<span class="annotation">@Service</span>
<span class="keyword">public class</span> LogService {
    
    <span class="annotation">@Transactional</span>(propagation = Propagation.REQUIRES_NEW)
    <span class="keyword">public void</span> log(String message) {
        <span class="comment">// íŠ¸ëœì­ì…˜ B (ë…ë¦½ì !)</span>
        logRepository.save(log);
    }
}
                    </div>

                    <div class="flow-step">
                        <h4>ì‹¤í–‰ íë¦„</h4>
                        <div class="highlight-box info">
                            ğŸ”¹ createOrder() â†’ íŠ¸ëœì­ì…˜ A ì‹œì‘<br>
                            ğŸ”¹ orderRepository.save() â†’ íŠ¸ëœì­ì…˜ A<br>
                            ğŸ”¹ log() â†’ íŠ¸ëœì­ì…˜ B ì‹œì‘ (A ì¤‘ë‹¨)<br>
                            ğŸ”¹ logRepository.save() â†’ íŠ¸ëœì­ì…˜ B<br>
                            ğŸ”¹ log() ì™„ë£Œ â†’ íŠ¸ëœì­ì…˜ B ì»¤ë°‹ âœ…<br>
                            ğŸ”¹ ì˜ˆì™¸ ë°œìƒ â†’ íŠ¸ëœì­ì…˜ A ë¡¤ë°± âŒ<br>
                            <br>
                            <strong>ê²°ê³¼:</strong> ì£¼ë¬¸ì€ ë¡¤ë°±ë˜ì§€ë§Œ ë¡œê·¸ëŠ” ë‚¨ìŒ!
                        </div>
                    </div>
                </div>

                <h3>3. SUPPORTS (íŠ¸ëœì­ì…˜ ì„ íƒì )</h3>
                <div class="diagram">
                    <div class="code-block">
<span class="annotation">@Service</span>
<span class="keyword">public class</span> ProductService {
    
    <span class="annotation">@Transactional</span>(propagation = Propagation.SUPPORTS)
    <span class="keyword">public</span> Product findProduct(Long id) {
        <span class="comment">// ê¸°ì¡´ íŠ¸ëœì­ì…˜ ìˆìœ¼ë©´ ì°¸ì—¬</span>
        <span class="comment">// ì—†ìœ¼ë©´ íŠ¸ëœì­ì…˜ ì—†ì´ ì‹¤í–‰</span>
        <span class="keyword">return</span> productRepository.findById(id);
    }
}

<span class="comment">// Case 1: íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ í˜¸ì¶œ</span>
<span class="annotation">@Transactional</span>
<span class="keyword">public void</span> orderWithProduct() {
    Product product = productService.findProduct(1L);
    <span class="comment">// â†’ íŠ¸ëœì­ì…˜ ì°¸ì—¬</span>
}

<span class="comment">// Case 2: íŠ¸ëœì­ì…˜ ì—†ì´ í˜¸ì¶œ</span>
<span class="keyword">public void</span> viewProduct() {
    Product product = productService.findProduct(1L);
    <span class="comment">// â†’ íŠ¸ëœì­ì…˜ ì—†ì´ ì‹¤í–‰ (autoCommit=true)</span>
}
                    </div>
                </div>

                <h3>ì „íŒŒ ì†ì„± ì„ íƒ ê°€ì´ë“œ</h3>
                <div class="interactive-diagram">
                    <div class="diagram-box">
                        <div class="icon">âœ…</div>
                        <h4>REQUIRED</h4>
                        <p>ì¼ë°˜ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§</p>
                        <small>ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì‚¬ìš©</small>
                    </div>
                    <div class="diagram-box">
                        <div class="icon">ğŸ†•</div>
                        <h4>REQUIRES_NEW</h4>
                        <p>ë…ë¦½ì ì¸ ì‘ì—…</p>
                        <small>ë¡œê·¸, ê°ì‚¬, ì•Œë¦¼ ë“±</small>
                    </div>
                    <div class="diagram-box">
                        <div class="icon">ğŸ“–</div>
                        <h4>SUPPORTS</h4>
                        <p>ì½ê¸° ì „ìš©</p>
                        <small>ì¡°íšŒ ë©”ì„œë“œ</small>
                    </div>
                    <div class="diagram-box">
                        <div class="icon">âš ï¸</div>
                        <h4>MANDATORY</h4>
                        <p>íŠ¸ëœì­ì…˜ í•„ìˆ˜</p>
                        <small>ë°˜ë“œì‹œ íŠ¸ëœì­ì…˜ ë‚´ í˜¸ì¶œ</small>
                    </div>
                </div>
            </div>

            <!-- Tab 6: ì‹œë‚˜ë¦¬ì˜¤ -->
            <div id="scenarios" class="tab-content">
                <h2>âœ… ì„±ê³µ/ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤</h2>

                <h3>ì‹œë‚˜ë¦¬ì˜¤ 1: ì •ìƒ ì»¤ë°‹ âœ…</h3>
                <div class="diagram">
                    <div class="code-block">
<span class="annotation">@Transactional</span>
<span class="keyword">public void</span> successCase() {
    orderRepository.save(order);        <span class="comment">// SQL ì‹¤í–‰ (ë¯¸ì»¤ë°‹)</span>
    paymentRepository.save(payment);    <span class="comment">// SQL ì‹¤í–‰ (ë¯¸ì»¤ë°‹)</span>
    
    <span class="comment">// ë©”ì„œë“œ ì •ìƒ ì™„ë£Œ</span>
    <span class="comment">// â†’ commit() ìë™ í˜¸ì¶œ</span>
}
                    </div>

                    <div class="highlight-box success">
                        <strong>âœ… ê²°ê³¼:</strong><br>
                        1. Connection.commit() í˜¸ì¶œ<br>
                        2. ëª¨ë“  SQLì´ DBì— ë°˜ì˜ë¨<br>
                        3. ThreadLocal ì •ë¦¬<br>
                        4. Connection ë°˜í™˜ (ì»¤ë„¥ì…˜ í’€)
                    </div>
                </div>

                <h3>ì‹œë‚˜ë¦¬ì˜¤ 2: RuntimeException ë¡¤ë°± âŒ</h3>
                <div class="diagram">
                    <div class="code-block">
<span class="annotation">@Transactional</span>
<span class="keyword">public void</span> runtimeExceptionCase() {
    orderRepository.save(order);        <span class="comment">// SQL ì‹¤í–‰ (ë¯¸ì»¤ë°‹)</span>
    
    <span class="keyword">throw new</span> RuntimeException(<span class="string">"ì˜¤ë¥˜!"</span>); <span class="comment">// ì˜ˆì™¸ ë°œìƒ!</span>
    
    paymentRepository.save(payment);    <span class="comment">// ì‹¤í–‰ ì•ˆë¨</span>
}
                    </div>

                    <div class="highlight-box error">
                        <strong>âŒ ê²°ê³¼:</strong><br>
                        1. RuntimeException ìºì¹˜<br>
                        2. Connection.rollback() í˜¸ì¶œ<br>
                        3. ëª¨ë“  SQL ì·¨ì†Œ (orderë„ ì €ì¥ ì•ˆë¨)<br>
                        4. ThreadLocal ì •ë¦¬<br>
                        5. Connection ë°˜í™˜<br>
                        6. ì˜ˆì™¸ë¥¼ í˜¸ì¶œìì—ê²Œ ì „íŒŒ
                    </div>
                </div>

                <h3>ì‹œë‚˜ë¦¬ì˜¤ 3: Checked Exception ì»¤ë°‹ (ê¸°ë³¸) âš ï¸</h3>
                <div class="diagram">
                    <div class="code-block">
<span class="annotation">@Transactional</span> <span class="comment">// ê¸°ë³¸ ì„¤ì •</span>
<span class="keyword">public void</span> checkedExceptionCase() <span class="keyword">throws</span> Exception {
    orderRepository.save(order);
    
    <span class="keyword">throw new</span> Exception(<span class="string">"ì²´í¬ ì˜ˆì™¸"</span>); <span class="comment">// Checked Exception</span>
}
                    </div>

                    <div class="highlight-box">
                        <strong>âš ï¸ ê²°ê³¼:</strong><br>
                        ê¸°ë³¸ì ìœ¼ë¡œ <strong>ì»¤ë°‹ë¨!</strong> (ë¡¤ë°± ì•ˆë¨)<br>
                        â†’ RuntimeExceptionë§Œ ê¸°ë³¸ìœ¼ë¡œ ë¡¤ë°±<br>
                        <br>
                        <strong>í•´ê²°ì±…:</strong> rollbackFor ì§€ì •
                    </div>

                    <div class="code-block">
<span class="annotation">@Transactional</span>(rollbackFor = Exception.<span class="keyword">class</span>)
<span class="keyword">public void</span> fixedCase() <span class="keyword">throws</span> Exception {
    orderRepository.save(order);
    <span class="keyword">throw new</span> Exception(<span class="string">"ì²´í¬ ì˜ˆì™¸"</span>);
    <span class="comment">// ì´ì œ ë¡¤ë°±ë¨! âœ…</span>
}
                    </div>
                </div>

                <h3>ì‹œë‚˜ë¦¬ì˜¤ 4: ë¶€ë¶„ ë¡¤ë°± (REQUIRES_NEW)</h3>
                <div class="diagram">
                    <div class="code-block">
<span class="annotation">@Transactional</span>
<span class="keyword">public void</span> partialRollback() {
    orderRepository.save(order);               <span class="comment">// íŠ¸ëœì­ì…˜ A</span>
    
    logService.log(<span class="string">"ì£¼ë¬¸ ì‹œë„"</span>);               <span class="comment">// íŠ¸ëœì­ì…˜ B (REQUIRES_NEW)</span>
    
    <span class="keyword">throw new</span> RuntimeException(<span class="string">"ì£¼ë¬¸ ì‹¤íŒ¨"</span>);   <span class="comment">// ì˜ˆì™¸!</span>
}

<span class="annotation">@Transactional</span>(propagation = Propagation.REQUIRES_NEW)
<span class="keyword">public void</span> log(String msg) {
    logRepository.save(log);                   <span class="comment">// íŠ¸ëœì­ì…˜ B</span>
}
                    </div>

                    <div class="highlight-box info">
                        <strong>ğŸ”¹ ê²°ê³¼:</strong><br>
                        â€¢ íŠ¸ëœì­ì…˜ A (ì£¼ë¬¸): ë¡¤ë°± âŒ<br>
                        â€¢ íŠ¸ëœì­ì…˜ B (ë¡œê·¸): ì»¤ë°‹ âœ…<br>
                        <br>
                        <strong>í™œìš©:</strong> ì‹¤íŒ¨í•´ë„ ë¡œê·¸ëŠ” ë‚¨ê²¨ì•¼ í•  ë•Œ
                    </div>
                </div>

                <h3>ì‹œë‚˜ë¦¬ì˜¤ 5: ë‚´ë¶€ í˜¸ì¶œ ë¬¸ì œ (í”„ë¡ì‹œ ìš°íšŒ) ğŸš¨</h3>
                <div class="diagram">
                    <div class="code-block">
<span class="annotation">@Service</span>
<span class="keyword">public class</span> OrderService {
    
    <span class="annotation">@Transactional</span>
    <span class="keyword">public void</span> createOrder() {
        <span class="comment">// íŠ¸ëœì­ì…˜ ì ìš©ë¨ âœ…</span>
        
        updateStock(); <span class="comment">// ê°™ì€ í´ë˜ìŠ¤ ë‚´ë¶€ í˜¸ì¶œ</span>
    }
    
    <span class="annotation">@Transactional</span>
    <span class="keyword">public void</span> updateStock() {
        <span class="comment">// âŒ íŠ¸ëœì­ì…˜ ì ìš© ì•ˆë¨!</span>
        <span class="comment">// ì´ìœ : í”„ë¡ì‹œë¥¼ ê±°ì¹˜ì§€ ì•Šê³  ì§ì ‘ í˜¸ì¶œ</span>
    }
}
                    </div>

                    <div class="highlight-box error">
                        <strong>âŒ ë¬¸ì œ:</strong> ë‚´ë¶€ ë©”ì„œë“œ í˜¸ì¶œì€ í”„ë¡ì‹œë¥¼ ê±°ì¹˜ì§€ ì•ŠìŒ!<br>
                        <br>
                        <strong>ì´ìœ :</strong>
                        <div class="code-block">
<span class="comment">// ì‹¤ì œ ë™ì‘:</span>
<span class="keyword">this</span>.updateStock(); <span class="comment">// í”„ë¡ì‹œê°€ ì•„ë‹Œ ì›ë³¸ ê°ì²´ì˜ this</span>
                        </div>
                    </div>

                    <div class="highlight-box success">
                        <strong>âœ… í•´ê²°ì±… 1: ë‹¤ë¥¸ ë¹ˆìœ¼ë¡œ ë¶„ë¦¬</strong>
                        <div class="code-block">
<span class="annotation">@Service</span>
<span class="keyword">public class</span> OrderService {
    <span class="annotation">@Autowired</span>
    <span class="keyword">private</span> StockService stockService;
    
    <span class="annotation">@Transactional</span>
    <span class="keyword">public void</span> createOrder() {
        stockService.updateStock(); <span class="comment">// ë‹¤ë¥¸ ë¹ˆ â†’ í”„ë¡ì‹œ ê±°ì¹¨ âœ…</span>
    }
}
                        </div>
                    </div>
                </div>

                <h3>ë¡¤ë°± ê·œì¹™ ì •ë¦¬</h3>
                <table class="comparison-table">
                    <tr>
                        <th>ì˜ˆì™¸ íƒ€ì…</th>
                        <th>ê¸°ë³¸ ë™ì‘</th>
                        <th>ì„¤ì •</th>
                    </tr>
                    <tr>
                        <td><strong>RuntimeException</strong><br>(Unchecked)</td>
                        <td>ë¡¤ë°± âŒ</td>
                        <td>@Transactional<br>(ê¸°ë³¸ê°’)</td>
                    </tr>
                    <tr>
                        <td><strong>Exception</strong><br>(Checked)</td>
                        <td>ì»¤ë°‹ âœ…</td>
                        <td>@Transactional<br>(ê¸°ë³¸ê°’)</td>
                    </tr>
                    <tr>
                        <td><strong>Exception</strong><br>(Checked)</td>
                        <td>ë¡¤ë°± âŒ</td>
                        <td>@Transactional<br>(rollbackFor = Exception.class)</td>
                    </tr>
                    <tr>
                        <td><strong>RuntimeException</strong></td>
                        <td>ì»¤ë°‹ âœ…</td>
                        <td>@Transactional<br>(noRollbackFor = RuntimeException.class)</td>
                    </tr>
                </table>
            </div>

            <!-- Tab 7: ThreadLocal -->
            <div id="threadlocal" class="tab-content">
                <h2>ğŸ§µ ThreadLocalê³¼ íŠ¸ëœì­ì…˜ ë™ê¸°í™”</h2>

                <div class="highlight-box info">
                    <strong>í•µì‹¬ ì§ˆë¬¸:</strong> ê°™ì€ íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ ì—¬ëŸ¬ Repositoryê°€ ì–´ë–»ê²Œ ê°™ì€ Connectionì„ ì‚¬ìš©í• ê¹Œ?<br>
                    <strong>ë‹µ:</strong> ThreadLocal!
                </div>

                <h3>ThreadLocalì´ë€?</h3>
                <div class="diagram">
                    <div class="code-block">
<span class="keyword">public class</span> ThreadLocalExample {
    
    <span class="comment">// ìŠ¤ë ˆë“œë§ˆë‹¤ ë…ë¦½ì ì¸ ë³€ìˆ˜</span>
    <span class="keyword">private static</span> ThreadLocal&lt;String&gt; threadLocal = 
        <span class="keyword">new</span> ThreadLocal&lt;&gt;();
    
    <span class="keyword">public static void</span> main(String[] args) {
        <span class="comment">// ìŠ¤ë ˆë“œ 1</span>
        <span class="keyword">new</span> Thread(() -&gt; {
            threadLocal.set(<span class="string">"Thread-1ì˜ ê°’"</span>);
            System.out.println(threadLocal.get()); <span class="comment">// "Thread-1ì˜ ê°’"</span>
        }).start();
        
        <span class="comment">// ìŠ¤ë ˆë“œ 2</span>
        <span class="keyword">new</span> Thread(() -&gt; {
            threadLocal.set(<span class="string">"Thread-2ì˜ ê°’"</span>);
            System.out.println(threadLocal.get()); <span class="comment">// "Thread-2ì˜ ê°’"</span>
        }).start();
        
        <span class="comment">// ê° ìŠ¤ë ˆë“œê°€ ë…ë¦½ì ì¸ ê°’ì„ ê°€ì§!</span>
    }
}
                    </div>
                </div>

                <h3>íŠ¸ëœì­ì…˜ì—ì„œ ThreadLocal ì‚¬ìš©</h3>
                <div class="diagram">
                    <div class="flow-step">
                        <h4><span class="badge action">1</span> íŠ¸ëœì­ì…˜ ì‹œì‘ - Connection ì €ì¥</h4>
                        <div class="code-block">
<span class="comment">// TransactionManager</span>
Connection conn = dataSource.getConnection();
conn.setAutoCommit(<span class="keyword">false</span>);

<span class="comment">// ThreadLocalì— Connection ì €ì¥</span>
TransactionSynchronizationManager.bindResource(
    dataSource, 
    <span class="keyword">new</span> ConnectionHolder(conn)
);
                        </div>
                    </div>

                    <div class="flow-arrow">â†“</div>

                    <div class="flow-step">
                        <h4><span class="badge action">2</span> Repository - Connection ê°€ì ¸ì˜¤ê¸°</h4>
                        <div class="code-block">
<span class="comment">// OrderRepository</span>
<span class="keyword">public void</span> save(Order order) {
    <span class="comment">// ThreadLocalì—ì„œ Connection êº¼ë‚´ê¸°</span>
    Connection conn = DataSourceUtils.getConnection(dataSource);
    
    <span class="comment">// SQL ì‹¤í–‰</span>
    PreparedStatement stmt = conn.prepareStatement(
        <span class="string">"INSERT INTO orders VALUES (?, ?)"</span>
    );
    stmt.executeUpdate();
}
                        </div>
                    </div>

                    <div class="flow-arrow">â†“</div>

                    <div class="flow-step">
                        <h4><span class="badge action">3</span> ë‹¤ë¥¸ Repositoryë„ ê°™ì€ Connection</h4>
                        <div class="code-block">
<span class="comment">// PaymentRepository</span>
<span class="keyword">public void</span> save(Payment payment) {
    <span class="comment">// ê°™ì€ ThreadLocalì—ì„œ ê°™ì€ Connection!</span>
    Connection conn = DataSourceUtils.getConnection(dataSource);
    
    <span class="comment">// ê°™ì€ íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ ì‹¤í–‰ë¨</span>
    PreparedStatement stmt = conn.prepareStatement(
        <span class="string">"INSERT INTO payments VALUES (?, ?)"</span>
    );
    stmt.executeUpdate();
}
                        </div>
                    </div>

                    <div class="flow-arrow">â†“</div>

                    <div class="flow-step">
                        <h4><span class="badge action">4</span> íŠ¸ëœì­ì…˜ ì¢…ë£Œ - Connection ì •ë¦¬</h4>
                        <div class="code-block">
<span class="comment">// TransactionManager</span>
conn.commit(); <span class="comment">// ë˜ëŠ” rollback()</span>

<span class="comment">// ThreadLocalì—ì„œ ì œê±°</span>
TransactionSynchronizationManager.unbindResource(dataSource);

<span class="comment">// Connection ë°˜í™˜</span>
conn.close();
                        </div>
                    </div>
                </div>

                <h3>ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œì˜ ì•ˆì „ì„±</h3>
                <div class="diagram">
                    <div class="code-block">
<span class="comment">// ë™ì‹œì— 2ê°œ HTTP ìš”ì²­</span>

Thread-1 (ì‚¬ìš©ì A):
    â”œâ”€ TransactionManager.getTransaction()
    â”œâ”€ Connection-1 íšë“
    â”œâ”€ ThreadLocalì— Connection-1 ì €ì¥
    â”œâ”€ orderRepository.save()
    â”‚   â””â”€ ThreadLocalì—ì„œ Connection-1 êº¼ëƒ„ âœ…
    â””â”€ commit(Connection-1)

Thread-2 (ì‚¬ìš©ì B):
    â”œâ”€ TransactionManager.getTransaction()
    â”œâ”€ Connection-2 íšë“
    â”œâ”€ ThreadLocalì— Connection-2 ì €ì¥
    â”œâ”€ orderRepository.save()
    â”‚   â””â”€ ThreadLocalì—ì„œ Connection-2 êº¼ëƒ„ âœ…
    â””â”€ commit(Connection-2)

<span class="comment">â†’ ê° ìŠ¤ë ˆë“œê°€ ë…ë¦½ì ì¸ Connection ì‚¬ìš©! ì•ˆì „! ğŸ”’</span>
                    </div>
                </div>

                <h3>TransactionSynchronizationManager ë‚´ë¶€ êµ¬ì¡°</h3>
                <div class="diagram">
                    <div class="code-block">
<span class="keyword">public abstract class</span> TransactionSynchronizationManager {
    
    <span class="comment">// ThreadLocal ë³€ìˆ˜ë“¤</span>
    <span class="keyword">private static final</span> ThreadLocal&lt;Map&lt;Object, Object&gt;&gt; 
        resources = <span class="keyword">new</span> ThreadLocal&lt;&gt;();
    
    <span class="keyword">private static final</span> ThreadLocal&lt;String&gt; 
        currentTransactionName = <span class="keyword">new</span> ThreadLocal&lt;&gt;();
    
    <span class="keyword">private static final</span> ThreadLocal&lt;Boolean&gt; 
        currentTransactionReadOnly = <span class="keyword">new</span> ThreadLocal&lt;&gt;();
    
    <span class="keyword">private static final</span> ThreadLocal&lt;Integer&gt; 
        currentTransactionIsolationLevel = <span class="keyword">new</span> ThreadLocal&lt;&gt;();
    
    <span class="keyword">private static final</span> ThreadLocal&lt;Boolean&gt; 
        actualTransactionActive = <span class="keyword">new</span> ThreadLocal&lt;&gt;();
    
    <span class="comment">// Connection ì €ì¥</span>
    <span class="keyword">public static void</span> bindResource(Object key, Object value) {
        Map&lt;Object, Object&gt; map = resources.get();
        <span class="keyword">if</span> (map == <span class="keyword">null</span>) {
            map = <span class="keyword">new</span> HashMap&lt;&gt;();
            resources.set(map);
        }
        map.put(key, value); <span class="comment">// DataSource â†’ ConnectionHolder</span>
    }
    
    <span class="comment">// Connection ê°€ì ¸ì˜¤ê¸°</span>
    <span class="keyword">public static</span> Object getResource(Object key) {
        Map&lt;Object, Object&gt; map = resources.get();
        <span class="keyword">return</span> map != <span class="keyword">null</span> ? map.get(key) : <span class="keyword">null</span>;
    }
    
    <span class="comment">// Connection ì œê±°</span>
    <span class="keyword">public static</span> Object unbindResource(Object key) {
        Map&lt;Object, Object&gt; map = resources.get();
        <span class="keyword">if</span> (map == <span class="keyword">null</span>) {
            <span class="keyword">return null</span>;
        }
        Object value = map.remove(key);
        <span class="keyword">if</span> (map.isEmpty()) {
            resources.remove(); <span class="comment">// ë¹ˆ ë§µ ì œê±°</span>
        }
        <span class="keyword">return</span> value;
    }
}
                    </div>
                </div>

                <h3>ì™œ ThreadLocalì„ ì‚¬ìš©í• ê¹Œ?</h3>
                <div class="interactive-diagram">
                    <div class="diagram-box">
                        <div class="icon">ğŸ”’</div>
                        <h4>ìŠ¤ë ˆë“œ ì•ˆì „</h4>
                        <p>ê° ìŠ¤ë ˆë“œê°€ ë…ë¦½ì ì¸ Connection</p>
                    </div>
                    <div class="diagram-box">
                        <div class="icon">ğŸ¯</div>
                        <h4>íŒŒë¼ë¯¸í„° ë¶ˆí•„ìš”</h4>
                        <p>Connectionì„ ì „ë‹¬í•˜ì§€ ì•Šì•„ë„ ë¨</p>
                    </div>
                    <div class="diagram-box">
                        <div class="icon">ğŸ”„</div>
                        <h4>íŠ¸ëœì­ì…˜ ì¼ê´€ì„±</h4>
                        <p>ê°™ì€ íŠ¸ëœì­ì…˜ ë‚´ ëª¨ë“  ì½”ë“œê°€ ê°™ì€ Connection</p>
                    </div>
                    <div class="diagram-box">
                        <div class="icon">ğŸ§¹</div>
                        <h4>ìë™ ì •ë¦¬</h4>
                        <p>íŠ¸ëœì­ì…˜ ì¢…ë£Œ ì‹œ ìë™ ì œê±°</p>
                    </div>
                </div>

                <div class="highlight-box">
                    <strong>ğŸ’¡ í•µì‹¬ ì •ë¦¬:</strong><br>
                    â€¢ ThreadLocal ë•ë¶„ì— RepositoryëŠ” Connectionì„ ì§ì ‘ ë°›ì§€ ì•Šì•„ë„ ë¨<br>
                    â€¢ ê°™ì€ ìŠ¤ë ˆë“œ ë‚´ ëª¨ë“  Repositoryê°€ ìë™ìœ¼ë¡œ ê°™ì€ Connection ì‚¬ìš©<br>
                    â€¢ ê° HTTP ìš”ì²­(ìŠ¤ë ˆë“œ)ë§ˆë‹¤ ë…ë¦½ì ì¸ Connection â†’ ìŠ¤ë ˆë“œ ì•ˆì „<br>
                    â€¢ íŠ¸ëœì­ì…˜ ì¢…ë£Œ ì‹œ ìë™ìœ¼ë¡œ ThreadLocal ì •ë¦¬
                </div>
            </div>
        </div>

        <footer>
            <p>ğŸ“ ìŠ¤í”„ë§ íŠ¸ëœì­ì…˜ AOP ì™„ë²½ ê°€ì´ë“œ</p>
            <p>@Transactional í•˜ë‚˜ë¡œ ì´ ëª¨ë“  ê²ƒì´ ìë™ìœ¼ë¡œ!</p>
        </footer>
    </div>

    <script>
        function showTab(tabName) {
            // ëª¨ë“  íƒ­ ë¹„í™œì„±í™”
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));

            // ëª¨ë“  íƒ­ ì½˜í…ì¸  ìˆ¨ê¸°ê¸°
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));

            // ì„ íƒëœ íƒ­ í™œì„±í™”
            event.target.classList.add('active');

            // ì„ íƒëœ ì½˜í…ì¸  í‘œì‹œ
            document.getElementById(tabName).classList.add('active');

            // ìŠ¤í¬ë¡¤ ìµœìƒë‹¨ìœ¼ë¡œ
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function toggleDetails(id) {
            const element = document.getElementById(id);
            element.classList.toggle('active');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì• ë‹ˆë©”ì´ì…˜
        document.addEventListener('DOMContentLoaded', () => {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            });

            document.querySelectorAll('.flow-step, .component-box, .timeline-item').forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
                el.style.transition = 'all 0.5s ease';
                observer.observe(el);
            });
        });
    </script>
</body>
</html>